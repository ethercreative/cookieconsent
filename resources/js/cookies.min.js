var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),cookies=createCommonjsModule(function(e,t){var i,a,n;i="undefined"==typeof window?commonjsGlobal:window,a=function(e){if("object"!==_typeof(e.document))throw new Error("Cookies.js requires a `window` with a `document` object");var t=function e(t,i,a){return 1===arguments.length?e.get(t):e.set(t,i,a)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){t._cachedDocumentCookie!==t._document.cookie&&t._renewCache();var i=t._cache[t._cacheKeyPrefix+e];return void 0===i?void 0:decodeURIComponent(i)},t.set=function(e,i,a){return(a=t._getExtendedOptions(a)).expires=t._getExpiresDate(void 0===i?-1:a.expires),t._document.cookie=t._generateCookieString(e,i,a),t},t.expire=function(e,i){return t.set(e,void 0,i)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&void 0!==e.secure?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,i){if(i=i||new Date,"number"==typeof e?e=e===1/0?t._maxExpireDate:new Date(i.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,i){var a=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return a+=(i=i||{}).path?";path="+i.path:"",a+=i.domain?";domain="+i.domain:"",a+=i.expires?";expires="+i.expires.toUTCString():"",a+=i.secure?";secure":""},t._getCacheFromString=function(e){for(var i={},a=e?e.split("; "):[],n=0;n<a.length;n++){var o=t._getKeyValuePairFromCookieString(a[n]);void 0===i[t._cacheKeyPrefix+o.key]&&(i[t._cacheKeyPrefix+o.key]=o.value)}return i},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var i,a=e.substr(0,t);try{i=decodeURIComponent(a)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+a+'"',e)}return{key:i,value:e.substr(t+1)}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="1"===t.set("cookies.js",1).get("cookies.js");return t.expire("cookies.js"),e},t.enabled=t._areEnabled(),t},n=i&&"object"===_typeof(i.document)?a(i):a,(e.exports=n).Cookies=n}),cookies_1=cookies.Cookies,EtherCookies=function(){function e(){classCallCheck(this,e),this.initCookies()}return createClass(e,[{key:"initCookies",value:function(){this.state=window.ether_cookie_settings,this.createPopover(),this.createBtn(),this.createModal()}},{key:"createPopover",value:function(){var e=this;this.stage=this.state[this.state.stage],this.popover=document.createElement("div"),this.popover.id="ether_cookies","default"!==this.state.stage&&this.popover.classList.add("hidden");var t=document.createElement("div");t.classList.add("e_top");var i=document.createElement("span");i.innerText=this.state.title,t.appendChild(i),this.closeBtn=document.createElement("a"),this.closeBtn.innerText=this.stage.close,this.closeBtn.addEventListener("click",this.closeCookies.bind(this)),t.appendChild(this.closeBtn),this.popover.appendChild(t),this.description=document.createElement("div"),this.description.classList.add("e_text"),this.description.innerHTML=this.stage.description,this.popover.appendChild(this.description),this.acceptBtn=document.createElement("a"),this.acceptBtn.classList.add("e_accept"),this.acceptBtn.classList.add("e_cta"),this.acceptBtn.innerText=this.stage.accept,this.acceptBtn.addEventListener("click",this.cta.bind(this)),this.popover.appendChild(this.acceptBtn),document.body.appendChild(this.popover),setTimeout(function(){return e.popover.classList.add("active")},1500)}},{key:"togglePopover",value:function(){"accepted"===this.state.stage&&(this.state.stage="already_accepted"),this.updateText(),this.popover.classList.toggle("hidden"),"default"!==this.state.stage&&this.btn.classList.toggle("managed")}},{key:"createBtn",value:function(){var e=this;this.btn=document.createElement("a"),this.btn.id="ether_cookies_btn",this.btn.addEventListener("click",this.togglePopover.bind(this)),"default"!==this.state.stage&&this.btn.classList.add("managed");var t=document.createElement("img");t.src=this.state.icon,this.btn.appendChild(t),document.body.appendChild(this.btn),setTimeout(function(){return e.btn.classList.add("active")},1e3)}},{key:"createModal",value:function(){var e=this;this.modal=document.createElement("div"),this.modal.id="ether_cookies_modal";var t=document.createElement("div");t.classList.add("e_bg"),t.addEventListener("click",this.closeModal.bind(this)),this.modal.appendChild(t);var i=document.createElement("div");i.classList.add("e_content");var a=document.createElement("div");a.classList.add("e_top");var n=document.createElement("span");n.innerText=this.state.modal.title,a.appendChild(n);var o=document.createElement("a");o.innerText=this.state.modal.close,o.addEventListener("click",this.closeModal.bind(this)),a.appendChild(o),i.appendChild(a);var s=document.createElement("div");s.classList.add("e_description"),s.classList.add("e_block");var c=document.createElement("span");c.innerText=this.state.modal.subtitle,s.appendChild(c);var d=document.createElement("p");d.innerHTML=this.state.modal.description,s.appendChild(d),i.appendChild(s);var r=document.createElement("div");r.classList.add("e_switches"),r.classList.add("e_block"),Object.keys(this.state.modal.switches).map(function(t){var i=e.state.modal.switches[t],a=document.createElement("div");a.classList.add("e_row");var n=document.createElement("label");n.classList.add("e_label");var o=document.createElement("input");o.type="checkbox",o.checked=i.checked,i.enabled?o.addEventListener("change",e.toggleCookies.bind(e)):o.disabled=!0,n.appendChild(o);var s=document.createElement("small");n.appendChild(s);var c=document.createElement("div");c.classList.add("lightswitch"),n.appendChild(c),a.appendChild(n);var d=document.createElement("div");d.classList.add("e_text");var l=document.createElement("span");l.innerText=i.title,d.appendChild(l);var p=document.createElement("p");p.innerHTML=i.description,d.appendChild(p),a.appendChild(d),r.appendChild(a)}),i.appendChild(r);var l=document.createElement("a");l.classList.add("e_close"),l.classList.add("e_cta"),l.innerText="Close preferences",l.addEventListener("click",this.closeModal.bind(this)),i.appendChild(l),this.modal.appendChild(i),document.body.appendChild(this.modal),window.addEventListener("keyup",function(t){27===t.keyCode&&e.closeModal()})}},{key:"closeCookies",value:function(){-1===this.state.stage.indexOf("accepted")&&this.declineCookies(),this.popover.classList.add("hidden"),this.btn.classList.toggle("managed")}},{key:"declineCookies",value:function(){var e=parseInt(this.state.cookieLength);cookies.set(this.state.cookieName,"false",{expires:e,path:"/"}),this.state.stage="declined"}},{key:"acceptCookies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(new Date).getTime(),i=parseInt(this.state.cookieLength);cookies.set(this.state.cookieName,"true",{expires:i,path:"/"}),cookies.set(this.state.cookieName+"_time",t,{cookieLength:i,path:"/"}),e?window.location.reload():(this.state.stage="accepted",this.updateText())}},{key:"toggleCookies",value:function(e){if(e||e.target)switch(e.target.checked){case!0:this.acceptCookies();break;default:this.declineCookies()}}},{key:"openModal",value:function(){this.togglePopover(),this.modal.classList.add("active")}},{key:"closeModal",value:function(){this.modal.classList.remove("active")}},{key:"cta",value:function(){switch(this.state.stage){case"accepted":this.closeCookies();break;case"declined":case"already_accepted":this.openModal();break;default:this.acceptCookies(!0)}}},{key:"updateText",value:function(){this.stage=this.state[this.state.stage],this.closeBtn.innerText=this.stage.close,this.acceptBtn.innerText=this.stage.accept,this.description.innerHTML=this.stage.description}}]),e}();new EtherCookies;
//# sourceMappingURL=cookies.min.js.map